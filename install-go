#!/bin/bash
set -e

if [ -e ~/go ]; then
    echo 'golang already installed. exit'
    exit 1
fi

url="https://mirrors.ustc.edu.cn/golang/go1.10.1.linux-amd64.tar.gz"
GO=`basename $url`
chkfile='sha256.txt'

wget $url --no-check-certificate -O $GO
echo $GO

wget "${url}.sha256" -O $chkfile

echo 'Checking sha256'
echo "`cat $chkfile`  $GO" |  sha256sum --check -
rm $chkfile

tar xzf $GO
mv -v go ~/
mkdir ~/gos

echo 'Go install finished..'
echo 'Please copy bashrc into $HOME dir to make go work'
echo 'run: go get -u github.com/jstemmer/gotags to install gotags.'
echo 'run: go get -u github.com/rogpeppe/godef to install godef'

rm $GO
